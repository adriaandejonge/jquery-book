00 <!DOCTYPE html>
01 
02 <html lang="en">
03 <head>
04   <title>A function as argument for append()</title>
05   <style>
06   /* please externalize this code to an external
07      .css file */
08   div#template {
09     display: none;
10   }
11   </style>
12 </head>
13 <body>
14 
15 <div id="append-placeholder">
16   <p>Test!</p>
17 </div>
18 
19 <button id="append">Add more...</button><br>
20 
21 <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
22 
23 <script>
24 // please externalize this code to an external .js file
25 $(document).ready(function() {
26 
27   $('#append').click(function() {
28     $('#append-placeholder').append(function(index, html) {
29       var more = "<p>There is room for more</p>",
30         last = "<p>This is the last one</p>",
31         spaceLeft = 160 - $.trim(html).length - last.length;
32     
33       if(more.length < spaceLeft)
34         return more;
35       else if(spaceLeft > 0)
36         return last;
37     });
38   });
39 
40 });
41 </script>
42 </body>
43 </html>
